<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>券商费率对比表</title>
    <style>
        /* 全局样式 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        /* 容器布局 */
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* 左侧控制面板 */
        .sidebar {
            width: 280px;
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            overflow-y: auto;
            flex-shrink: 0;
        }
        
        .sidebar h2 {
            color: white;
            margin-bottom: 20px;
            border-bottom: 1px solid #34495e;
            padding-bottom: 10px;
        }
        
        .control-section {
            margin-bottom: 30px;
        }
        
        .control-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #ecf0f1;
        }
        
        /* 筛选器样式 */
        .filter-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        
        .filter-item {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .filter-item label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            color: #ecf0f1;
            font-size: 14px;
        }
        
        .filter-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        .high-end-badge {
            background-color: #e74c3c;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 5px;
        }
        
        /* 操作按钮 */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .action-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .btn-success {
            background-color: #27ae60;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #2ecc71;
        }
        
        .btn-danger {
            background-color: #e74c3c;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-secondary {
            background-color: #7f8c8d;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #95a5a6;
        }
        
        /* 右侧内容区域 */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .main-content h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }
        
        /* 表格容器 */
        .table-container {
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        /* 表格样式 */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .data-table th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
            text-align: left;
            padding: 12px;
            white-space: nowrap;
            position: sticky;
            top: 0;
        }
        
        .data-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #ddd;
            vertical-align: top;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .data-table tr:hover {
            background-color: #f1f1f1;
        }
        
        /* 特殊样式 */
        .recommend-cell {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 8px !important;
            color: #856404;
            font-weight: bold;
        }
        
        .no-data {
            text-align: center;
            padding: 40px !important;
            color: #7f8c8d;
            font-style: italic;
        }
        
        /* 页脚 */
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .footer p {
            margin-bottom: 8px;
        }
        
        /* 免责声明 */
        .disclaimer {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin-top: 30px;
            border-radius: 4px;
        }
        
        .disclaimer h3 {
            color: #495057;
            margin-bottom: 10px;
        }
        
        .disclaimer ul {
            padding-left: 20px;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                max-height: 300px;
                border-bottom: 2px solid #34495e;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .data-table th,
            .data-table td {
                padding: 8px;
                font-size: 14px;
            }
        }
        
        /* 隐藏模板元素 */
        .template {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 左侧控制面板 -->
        <div class="sidebar">
            <h2>控制面板</h2>
            
            <!-- 数据筛选 -->
            <div class="control-section">
                <div class="control-title">券商数据选择</div>
                <div class="filter-list" id="filterList">
                    <!-- 筛选项由JavaScript动态生成 -->
                </div>
                
                <!-- 操作按钮 -->
                <div class="action-buttons">
                    <button id="selectAllBtn" class="action-btn btn-success">全选</button>
                    <button id="deselectAllBtn" class="action-btn btn-danger">全不选</button>
                    <button id="resetBtn" class="action-btn btn-secondary">重置</button>
                </div>
            </div>
        </div>
        
        <!-- 右侧内容区域 -->
        <div class="main-content">
            <h1>券商费率对比表</h1>
            
            <!-- 表格容器 -->
            <div class="table-container">
                <table id="dataTable" class="data-table">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>券商代号</th>
                            <th>券商名称</th>
                            <th>推荐语</th>
                            <th>入金门槛</th>
                            <th>股票费率</th>
                            <th>过户费</th>
                            <th>ETF费率</th>
                            <th>逆回购</th>
                            <th>可转债</th>
                            <th>软件支持</th>
                            <th>永久费率要求</th>
                            <th>奖励</th>
                            <th>渠道</th>
                            <th>营业厅</th>
                            <th>备注</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr class="no-data" id="noDataRow">
                            <td colspan="16" class="no-data">请选择要显示的券商数据</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 免责声明 -->
            <div class="disclaimer">
                <h3>免责声明</h3>
                <ul>
                    <li>以上费率信息仅供参考，实际费率以券商官方公布为准。</li>
                    <li>各项优惠政策可能会根据券商规定随时调整，请在开户前与客户经理确认最新费率。</li>
                    <li>投资有风险，入市需谨慎。</li>
                </ul>
            </div>
            
            <!-- 页脚 -->
            <div class="footer">
                <p>联系方式：304278785 (QQ) | netqqnet (wechat) | qing606@gmail.com</p>
                <p>&copy; 2025 靠谱开户 - 专注于为散户朋友选择最优的股票费率方案</p>
            </div>
        </div>
    </div>

    <!-- 模板定义 -->
    <div style="display: none;">
        <!-- 数据行模板 -->
        <div id="rowTemplate">
            <tr>
                <td>{{序号}}</td>
                <td>{{券商代号}}</td>
                <td>{{券商}}</td>
                <td class="recommend-cell">{{推荐语}}</td>
                <td>{{入金门槛}}</td>
                <td>{{股票}}</td>
                <td>{{过户费}}</td>
                <td>{{ETF}}</td>
                <td>{{逆回购}}</td>
                <td>{{可转债}}</td>
                <td>{{软件支持}}</td>
                <td>{{永久费率要求}}</td>
                <td>{{奖励}}</td>
                <td>{{渠道}}</td>
                <td>{{营业厅}}</td>
                <td>{{备注}}</td>
            </tr>
        </div>
        
        <!-- 筛选器项模板 -->
        <div id="filterItemTemplate">
            <div class="filter-item">
                <input type="checkbox" id="broker-{{index}}" data-index="{{index}}" {{checked}}>
                <label for="broker-{{index}}">{{券商代号}} - {{券商}}{{高端标识}}</label>
            </div>
        </div>
    </div>

    <script>
        // 1. 数据定义 - JSON格式存储数据
        const brokerData = [
            {
                "券商代号": "01 国S",
                "券商": "国盛",
                "推荐语": "江西国资背景，稳定性好",
                "入金门槛": "1.5w",
                "股票": "万0.854 兔5\n1元起",
                "过户费": "沪万0.1,深免",
                "ETF": "万0.5兔5 \n1元起",
                "逆回购": "1折",
                "可转债": "万0.5兔5 \n1元起",
                "软件支持1": "同花顺",
                "软件支持2": "通达信",
                "永久费率要求": "入金1.5W，保持20个交易日，且股票类交易至少一次",
                "是否高端": false,
                "visible": true,
                "奖励": "400+千1.6",
                "渠道": "慧财",
                "营业厅": "广东",
                "备注": ""
            },
            {
                "券商代号": "02 CC",
                "券商": "财通",
                "推荐语": "股票费率最低，适合高频交易",
                "入金门槛": "1.5w",
                "股票": "万0.75兔5\n1元起",
                "过户费": "沪深万0.1",
                "ETF": "万0.5兔5\n0.1元起",
                "逆回购": "1折",
                "可转债": "沪万0.44\n深万0.8兔5 \n0.5起",
                "软件支持1": "同花顺",
                "软件支持2": "通达信",
                "永久费率要求": "入金1.5W，保持2个月，日均资产不低于1.3W，自动转永久",
                "是否高端": false,
                "visible": true,
                "奖励": "300+千1.5",
                "渠道": "聚财",
                "营业厅": "上海",
                "备注": ""
            },
            {
                "券商代号": "03 银H",
                "券商": "银河",
                "推荐语": "ETF交易费率优势明显",
                "入金门槛": "1.5w",
                "股票": "万0.854 \n5元起步",
                "过户费": "沪万0.1,深免",
                "ETF": "万0.5 免5\n0.01起",
                "逆回购": "1折",
                "可转债": "万0.5 , 5元起",
                "软件支持1": "同花顺",
                "软件支持2": "通达信",
                "永久费率要求": "入金1.5万以上，月日均资产1.5W以上(连续保持2个月)，且交易2000以上股票或者权益类ETF稳妥达标!自动转永久低佣!!",
                "是否高端": false,
                "visible": true,
                "奖励": "200+千1.2",
                "渠道": "汇财",
                "营业厅": "北京",
                "备注": ""
            },
            {
                "券商代号": "10 国J",
                "券商": "国君",
                "推荐语": "支持量化交易，提供QMT和Ptrade",
                "入金门槛": "30w",
                "股票": "0.854",
                "过户费": "沪万0.1,深免",
                "ETF": "万0.5棉5 \n0.5起",
                "逆回购": "1折",
                "可转债": "万0.5 0.1 元起",
                "软件支持1": "同花顺",
                "软件支持2": "通达信PC",
                "永久费率要求": "入金30w起,保持3个半月，股票持仓5成。 (入金50W送永久Level2,独立高速通道，送量化QMT和Ptrade)",
                "是否高端": true,
                "visible": true,
                "奖励": "600+千2.0",
                "渠道": "智财",
                "营业厅": "深圳",
                "备注": ""
            },
            {
                "券商代号": "11 国T",
                "券商": "国投",
                "推荐语": "大资金首选，费率永久稳定",
                "入金门槛": "50w",
                "股票": "万0.85免五\n0元起",
                "过户费": "沪万0.1,深免",
                "ETF": "万0.5兔五\n0.01元起",
                "逆回购": "1折",
                "可转债": "万0.6， 0.1起",
                "软件支持1": "同花顺",
                "软件支持2": "通达信PC",
                "永久费率要求": "入金50W，保持3个月，自动转永久。必须首开",
                "是否高端": true,
                "visible": true,
                "奖励": "800+千2.5",
                "渠道": "鑫财",
                "营业厅": "杭州",
                "备注": ""
            }
        ];
        
        // 2. 简单的模板引擎 - 修复版
        function renderTemplate(templateId, data) {
            // 获取模板内容
            const templateElement = document.getElementById(templateId);
            if (!templateElement) {
                console.error('Template not found:', templateId);
                return '';
            }
            
            let template = templateElement.innerHTML;
            
            // 替换模板中的变量
            let result = template.replace(/\{\{(.*?)\}\}/g, (match, key) => {
                // 去除key两端的空格
                key = key.trim();
                
                // 如果数据中存在该key，则返回对应的值
                if (data[key] !== undefined) {
                    // 处理换行符
                    return String(data[key]).replace(/\n/g, '<br>');
                }
                return '';
            });
            
            return result;
        }
        
        // 3. 生成两位数序号
        function generateSerialNumber(broker) {
            // 获取所有可见的数据
            const visibleData = brokerData.filter(b => b.visible);
            
            if (broker["是否高端"]) {
                // 高端从10开始编号
                const highEndData = visibleData.filter(b => b["是否高端"]);
                const index = highEndData.indexOf(broker);
                return String(10 + index).padStart(2, '0');
            } else {
                // 非高端从01开始编号
                const normalData = visibleData.filter(b => !b["是否高端"]);
                const index = normalData.indexOf(broker);
                return String(1 + index).padStart(2, '0');
            }
        }
        
        // 4. 准备渲染数据
        function prepareRenderData(broker) {
            // 创建一个新对象，包含所有需要的数据
            const renderData = { ...broker };
            
            // 添加序号
            renderData["序号"] = generateSerialNumber(broker);
            
            // 合并软件支持信息
            const softwares = [];
            if (broker["软件支持1"]) softwares.push(broker["软件支持1"]);
            if (broker["软件支持2"]) softwares.push(broker["软件支持2"]);
            renderData["软件支持"] = softwares.join('\n');
            
            return renderData;
        }
        
        // 5. 初始化筛选器
        function initFilters() {
            const filterList = document.getElementById('filterList');
            if (!filterList) return;
            
            filterList.innerHTML = '';
            
            brokerData.forEach((broker, index) => {
                // 准备筛选器数据
                const filterData = {
                    index,
                    "券商代号": broker["券商代号"],
                    "券商": broker["券商"],
                    "高端标识": broker["是否高端"] ? '<span class="high-end-badge">高端</span>' : '',
                    "checked": broker.visible ? 'checked="checked"' : ''
                };
                
                // 渲染筛选器项
                const filterHtml = renderTemplate('filterItemTemplate', filterData);
                
                // 创建临时容器来解析HTML
                const tempContainer = document.createElement('div');
                tempContainer.innerHTML = filterHtml;
                
                // 获取生成的筛选器项并添加到列表
                const filterItem = tempContainer.firstElementChild;
                if (filterItem) {
                    filterList.appendChild(filterItem);
                    
                    // 添加事件监听器
                    const checkbox = filterItem.querySelector('input[type="checkbox"]');
                    if (checkbox) {
                        checkbox.addEventListener('change', function() {
                            const idx = parseInt(this.dataset.index);
                            if (!isNaN(idx) && idx >= 0 && idx < brokerData.length) {
                                brokerData[idx].visible = this.checked;
                                renderTable();
                            }
                        });
                    }
                }
            });
        }
        
        // 6. 设置批量操作按钮
        function setupBatchButtons() {
            // 全选
            const selectAllBtn = document.getElementById('selectAllBtn');
            if (selectAllBtn) {
                selectAllBtn.addEventListener('click', function() {
                    brokerData.forEach(broker => {
                        broker.visible = true;
                    });
                    
                    // 更新复选框状态
                    document.querySelectorAll('.filter-item input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = true;
                    });
                    
                    renderTable();
                });
            }
            
            // 全不选
            const deselectAllBtn = document.getElementById('deselectAllBtn');
            if (deselectAllBtn) {
                deselectAllBtn.addEventListener('click', function() {
                    brokerData.forEach(broker => {
                        broker.visible = false;
                    });
                    
                    // 更新复选框状态
                    document.querySelectorAll('.filter-item input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    
                    renderTable();
                });
            }
            
            // 重置
            const resetBtn = document.getElementById('resetBtn');
            if (resetBtn) {
                resetBtn.addEventListener('click', function() {
                    brokerData.forEach(broker => {
                        broker.visible = true;
                    });
                    
                    // 更新复选框状态
                    document.querySelectorAll('.filter-item input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = true;
                    });
                    
                    renderTable();
                });
            }
        }
        
        // 7. 渲染表格内容
        function renderTable() {
            const tableBody = document.getElementById('tableBody');
            if (!tableBody) return;
            
            const noDataRow = document.getElementById('noDataRow');
            if (!noDataRow) return;
            
            // 获取可见的数据
            const visibleData = brokerData.filter(broker => broker.visible);
            
            // 清空表格内容，保留无数据行
            tableBody.innerHTML = '';
            tableBody.appendChild(noDataRow);
            
            // 如果没有可见数据，只显示无数据提示
            if (visibleData.length === 0) {
                noDataRow.style.display = '';
                return;
            }
            
            // 隐藏无数据提示
            noDataRow.style.display = 'none';
            
            // 渲染数据行
            visibleData.forEach(broker => {
                try {
                    // 准备渲染数据
                    const renderData = prepareRenderData(broker);
                    
                    // 渲染行内容
                    const rowHtml = renderTemplate('rowTemplate', renderData);
                    
                    // 创建临时容器来解析HTML
                    const tempContainer = document.createElement('div');
                    tempContainer.innerHTML = rowHtml;
                    
                    // 获取生成的行并添加到表格
                    const row = tempContainer.querySelector('tr');
                    if (row) {
                        tableBody.appendChild(row);
                    }
                } catch (e) {
                    console.error('Error rendering row:', e);
                }
            });
        }
        
        // 8. 初始化
        function init() {
            try {
                console.log('Initializing...');
                initFilters();
                setupBatchButtons();
                renderTable();
                console.log('Initialization complete');
            } catch (e) {
                console.error('Initialization error:', e);
            }
        }
        
        // 页面加载完成后初始化
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            // 已经加载完成，直接初始化
            setTimeout(init, 100); // 小延迟确保DOM完全可用
        }
    </script>
</body>
</html>