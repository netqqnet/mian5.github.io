<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>券商费率对比表</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.2;
            color: #333;
            background-color: #f8f9fa;
            padding: 20px;
            font-size: 14px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
            text-align: center;
        }

        h2 {
            color: #495057;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.5rem;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 8px;
        }

        .section {
            margin-bottom: 40px;
        }

        .filter-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .filter-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #495057;
        }

        .filter-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-checkboxes label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
        }

        .data-row-filters {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            background-color: white;
        }

        .data-row-filters .filter-title {
            margin-bottom: 10px;
        }

        .data-row-filters label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .table {
            border: 1px solid #ccc;
            border-collapse: collapse;
            margin: 0;
            padding: 0;
            width: 100%;
            table-layout: fixed;
        }

        .table caption {
            font-size: 1em;
            margin: .5em 0 .75em;
            /* border-radius: 8px; */
        }

        .table tr {
            padding: .35em;
        }

        .table th,
        .table td {
            padding: .625em;
            text-align: center;
        }
        .table td {
            border: 1px dotted #ccc;
        }

        .table th {
            font-size: .85em;
            letter-spacing: .1em;
            text-transform: uppercase;
        }

        .table tr:nth-child(even) {
            background-color: #fff;
        }

        /* .table tr:hover {
            background-color: #e9ecef;
        } */

        @media screen and (max-width: 600px) {
            .table {
                border: 0;
            }

            .table caption {
                font-size: 1.2em;
            }

            .table thead {
                border: none;
                clip: rect(0 0 0 0);
                height: 1px;
                margin: -1px;
                overflow: hidden;
                padding: 0;
                position: absolute;
                width: 1px;
            }

            .table tr {
                border-bottom: 3px solid #ddd;
                display: block;
                margin-bottom: .625em;
            }

            .table td {
                border-bottom: 1px solid #ddd;
                display: block;
                font-size: .8em;
                text-align: left;
            }

            .table td::before {
                /*
    * aria-label has no advantage, it won't be read inside a table
    content: attr(aria-label);
    */
                content: attr(data-label);
                float: left;
                font-weight: bold;
                text-transform: uppercase;
            }

            .table td:last-child {
                border-bottom: 0;
            }
        }

        /* 
        .table-responsive {
            overflow-x: auto;
            margin-bottom: 30px;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        .table th {
            background-color: #0d6efd;
            color: white;
            font-weight: bold;
            text-align: left;
            padding: 12px;
            white-space: nowrap;
        }
        .table td {
            padding: 12px;
            border-bottom: 1px solid #dee2e6;
            vertical-align: top;
        }
        .table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .table tr:hover {
            background-color: #e9ecef;
        }
        .no-data {
            text-align: center;
            padding: 50px;
            color: #6c757d;
        }
        .footer {
            text-align: center;
            color: #6c757d;
            font-size: 14px;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
        }
        .btn-group {
            margin-bottom: 15px;
        }
        .btn {
            margin-right: 8px;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .single-table-container {
            margin-bottom: 30px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .single-table-header {
            background-color: #0d6efd;
            color: white;
            padding: 15px;
            font-weight: bold;
            font-size: 16px;
        }
        .vertical-table {
            width: 100%;
            border-collapse: collapse;
        }
        .vertical-table tr {
            border-bottom: 1px solid #dee2e6;
        }
        .vertical-table tr:last-child {
            border-bottom: none;
        }
        .vertical-table th {
            background-color: #f8f9fa;
            text-align: right;
            width: 25%;
            font-weight: normal;
            color: #495057;
            padding: 10px 15px;
            white-space: nowrap;
            vertical-align: middle;
        }
        .vertical-table td {
            padding: 10px 15px;
            background-color: white;
            vertical-align: middle;
        }
        .feature-highlight {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 8px 12px;
            border-radius: 4px;
            margin-top: 5px;
            font-size: 14px;
            color: #856404;
        } */

        /* 响应式设计 */
        /* @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            .table th, .table td {
                padding: 8px;
                font-size: 12px;
            }
            .filter-checkboxes {
                flex-direction: column;
                gap: 10px;
            }
            .data-row-filters {
                max-height: 150px;
            }
            .vertical-table th, .vertical-table td {
                padding: 8px;
                font-size: 14px;
            }
            .vertical-table th {
                width: 35%;
            }
        } */
    </style>
</head>

<body>
    <div class="container">
        <h1>券商费率对比表</h1>

        <!-- 字段筛选区域 -->
        <div class="filter-section">
            <h2>1. 字段显示控制</h2>
            <div class="filter-title">选择显示字段：</div>
            <div class="filter-checkboxes" id="fieldFilters"></div>
        </div>

        <!-- 数据行筛选区域 -->
        <div class="filter-section">
            <h2>2. 数据行显示控制</h2>
            <div class="btn-group">
                <button id="selectAllBtn" class="btn btn-sm btn-primary">全选</button>
                <button id="deselectAllBtn" class="btn btn-sm btn-secondary">全不选</button>
                <button id="resetFiltersBtn" class="btn btn-sm btn-outline-secondary">重置</button>
            </div>
            <div class="data-row-filters">
                <div class="filter-title">选择要显示的券商数据：</div>
                <div id="dataRowFilters"></div>
            </div>
        </div>

        <!-- 综合表格展示区域 -->
        <div class="section">
            <h2>3. 综合对比表格</h2>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead id="tableHeader">
                        <tr></tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr class="no-data">
                            <td colspan="10">加载中...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 单独表格展示区域
        <div class="section">
            <h2>4. 单独详情表格（竖向标题栏）</h2>
            <div class="filter-title">单独表格字段展示顺序设置：</div>
            <div class="filter-checkboxes" id="singleTableFieldOrderFilters"></div>
            
            <div id="singleTablesContainer" class="mt-4">
                <div class="no-data">加载中...</div>
            </div>
        </div> -->

        <!-- 免责声明 -->
        <div class="alert alert-info" role="alert">
            <strong>免责声明：</strong>
            <ul>
                <li>以上费率信息仅供参考，实际费率以券商官方公布为准。</li>
                <li>各项优惠政策可能会根据券商规定随时调整，请在开户前与客户经理确认最新费率。</li>
                <li>投资有风险，入市需谨慎。</li>
            </ul>
        </div>

        <div class="footer">
            <p>联系方式：304278785 (QQ) | netqqnet (wechat) | qing606@gmail.com</p>
            <p>&copy; 2025 靠谱开户 - 专注于为散户朋友选择最优的股票费率方案</p>
        </div>
    </div>

    <script>
        // 1. 数据定义 - 增加visible属性和特色字段
        const brokerData = [
            {
                "券商代号": "01 国S",
                "券商": "国盛",
                "推荐语": "江西国资背景，稳定性好",
                "入金门槛": "1.5w",
                "股票": "万0.854 兔5\n1元起",
                "过户费": "沪万0.1,深免",
                "ETF": "万0.5兔5 \n1元起",
                "逆回购": "1折",
                "可转债": "万0.5兔5 \n1元起",
                "软件支持": "✅同花顺 \n✅通达信",
                "永久费率要求": "入金1.5W，保持20个交易日，且股票类交易至少一次",
                "是否高端": false,
                "visible": true,
            },
            {
                "券商代号": "02 CC",
                "券商": "川财",
                "推荐语": "股票费率最低，适合高频交易",
                "入金门槛": "1.5w",
                "股票": "万0.75兔5\n1元起",
                "过户费": "沪深万0.1",
                "ETF": "万0.5兔5\n0.1元起",
                "逆回购": "1折",
                "可转债": "沪万0.44\n深万0.8兔5 \n0.5起",
                "软件支持": "✅同花顺 \n✅通达信",
                "永久费率要求": "入金1.5W，保持2个月，日均资产不低于1.3W，自动转永久",
                "是否高端": true,
                "visible": true,
            }
        ];

        // 2. 字段配置 - 控制哪些字段显示以及显示顺序
        let fieldConfig = {
            "券商代号": true,
            "券商": true,
            "入金门槛": true,
            "股票": true,
            "过户费": true,
            "ETF": true,
            "逆回购": true,
            "可转债": true,
            "软件支持": true,
            "永久费率要求": true,
            "是否高端": false,
        };

        // 3. 单独表格字段显示顺序配置
        let singleTableFieldOrder = [
            "券商代号", "券商", "入金门槛", "股票",
            "过户费", "ETF", "可转债", "逆回购", "软件支持",  "永久费率要求", "是否高端"
        ];

        // 4. 初始化字段筛选器
        function initFieldFilters() {
            const filterContainer = document.getElementById('fieldFilters');
            filterContainer.innerHTML = '';

            // 创建所有字段的checkbox
            Object.keys(fieldConfig).forEach(field => {
                const label = document.createElement('label');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = fieldConfig[field];
                checkbox.id = `filter-${field}`;
                checkbox.addEventListener('change', function () {
                    fieldConfig[field] = this.checked;
                    renderTable();
                });

                const span = document.createElement('span');
                span.textContent = field;

                label.appendChild(checkbox);
                label.appendChild(span);
                filterContainer.appendChild(label);
            });
        }

        // 5. 初始化数据行筛选器
        function initDataRowFilters() {
            const filterContainer = document.getElementById('dataRowFilters');
            filterContainer.innerHTML = '';

            // 为每一行数据创建checkbox
            brokerData.forEach((broker, index) => {
                const label = document.createElement('label');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = broker.visible;
                checkbox.id = `row-${index}`;
                checkbox.dataset.index = index;

                checkbox.addEventListener('change', function () {
                    const idx = parseInt(this.dataset.index);
                    brokerData[idx].visible = this.checked;
                    renderTable();
                    renderSingleTables();
                });

                // 获取券商名称（移除换行符）
                const brokerName = broker["券商"]
                const span = document.createElement('span');
                span.textContent = `${brokerName}`;

                label.appendChild(checkbox);
                label.appendChild(span);
                filterContainer.appendChild(label);
            });

            // 绑定批量操作按钮事件
            document.getElementById('selectAllBtn').addEventListener('click', selectAllRows);
            document.getElementById('deselectAllBtn').addEventListener('click', deselectAllRows);
            document.getElementById('resetFiltersBtn').addEventListener('click', resetFilters);
        }

        // 6. 初始化单独表格字段顺序设置
        function initSingleTableFieldOrderFilters() {
            const filterContainer = document.getElementById('singleTableFieldOrderFilters');
            filterContainer.innerHTML = '';

            // 为每个字段创建排序选项
            singleTableFieldOrder.forEach(field => {
                const label = document.createElement('label');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = true;
                checkbox.id = `single-filter-${field}`;
                checkbox.dataset.field = field;

                checkbox.addEventListener('change', function () {
                    // 更新字段显示状态
                    const fieldName = this.dataset.field;
                    if (this.checked) {
                        // 如果未在数组中，则添加
                        if (!singleTableFieldOrder.includes(fieldName)) {
                            singleTableFieldOrder.push(fieldName);
                        }
                    } else {
                        // 从数组中移除
                        const index = singleTableFieldOrder.indexOf(fieldName);
                        if (index > -1) {
                            singleTableFieldOrder.splice(index, 1);
                        }
                    }
                    renderSingleTables();
                });

                const span = document.createElement('span');
                span.textContent = field;

                label.appendChild(checkbox);
                label.appendChild(span);
                filterContainer.appendChild(label);
            });
        }

        // 7. 全选所有数据行
        function selectAllRows() {
            brokerData.forEach(broker => {
                broker.visible = true;
            });

            // 更新所有checkbox状态
            document.querySelectorAll('#dataRowFilters input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });

            renderTable();
            renderSingleTables();
        }

        // 8. 全不选所有数据行
        function deselectAllRows() {
            brokerData.forEach(broker => {
                broker.visible = false;
            });

            // 更新所有checkbox状态
            document.querySelectorAll('#dataRowFilters input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });

            renderTable();
            renderSingleTables();
        }

        // 9. 重置所有筛选条件
        function resetFilters() {
            // 重置字段显示
            Object.keys(fieldConfig).forEach(field => {
                fieldConfig[field] = true;
            });
            document.querySelectorAll('#fieldFilters input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });

            // 重置单独表格字段显示
            document.querySelectorAll('#singleTableFieldOrderFilters input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });

            // 恢复默认字段顺序
            singleTableFieldOrder = [
                "券商代号", "券商", "入金门槛", "股票",
            "过户费", "ETF", "可转债", "逆回购", "软件支持",  "永久费率要求", "是否高端"
            ];

            // 重置数据行显示
            selectAllRows();
        }

        // 10. 渲染综合表格
        function renderTable() {
            const headerRow = document.querySelector('#tableHeader tr');
            const tbody = document.getElementById('tableBody');

            // 清空表格
            headerRow.innerHTML = '';
            tbody.innerHTML = '';

            // 获取要显示的字段
            const visibleFields = Object.keys(fieldConfig).filter(field => fieldConfig[field]);

            // 获取要显示的数据行（visible为true的）
            const visibleData = brokerData.filter(broker => broker.visible);

            // 如果没有可见字段，显示提示信息
            if (visibleFields.length === 0) {
                const row = document.createElement('tr');
                const cell = document.createElement('td');
                cell.colSpan = 10;
                cell.className = 'no-data';
                cell.textContent = '请至少选择一个要显示的字段';
                row.appendChild(cell);
                tbody.appendChild(row);
                return;
            }

            // 如果没有可见数据行，显示提示信息
            if (visibleData.length === 0) {
                const row = document.createElement('tr');
                const cell = document.createElement('td');
                cell.colSpan = visibleFields.length;
                cell.className = 'no-data';
                cell.textContent = '请至少选择一个要显示的券商数据';
                row.appendChild(cell);
                tbody.appendChild(row);
                return;
            }

            // 渲染表头
            visibleFields.forEach(field => {
                const th = document.createElement('th');
                th.textContent = field;
                headerRow.appendChild(th);
            });

            // 渲染数据行
            visibleData.forEach(broker => {
                const row = document.createElement('tr');

                visibleFields.forEach(field => {
                    const td = document.createElement('td');
                    // 设置data-label为当前字段名
                    td.setAttribute('data-label', field);
                    // 将换行符转换为<br>标签
                    td.innerHTML = broker[field];

                    // // 特色字段特殊处理
                    // if (field === '特色' && broker[field]) {
                    //     td.classList.add('feature-highlight');
                    // }

                    row.appendChild(td);
                });

                tbody.appendChild(row);
            });
        }

        // function renderSingleTables() {
        //     const container = document.getElementById('singleTablesContainer');
        //     container.innerHTML = '';

        //     // 获取要显示的数据行（visible为true的）
        //     const visibleData = brokerData.filter(broker => broker.visible);

        //     // 如果没有可见数据行，显示提示信息
        //     if (visibleData.length === 0) {
        //         const noDataDiv = document.createElement('div');
        //         noDataDiv.className = 'no-data';
        //         noDataDiv.textContent = '请至少选择一个要显示的券商数据';
        //         container.appendChild(noDataDiv);
        //         return;
        //     }

        //     // 获取要在单独表格中显示的字段
        //     const visibleFields = singleTableFieldOrder.filter(field => field !== 'visible');

        //     // 为每个可见数据行创建单独表格
        //     visibleData.forEach(broker => {
        //         // 创建表格容器
        //         const tableContainer = document.createElement('div');
        //         tableContainer.className = 'single-table-container';

        //         // 创建表格标题
        //         const tableHeader = document.createElement('div');
        //         tableHeader.className = 'single-table-header';
        //         const brokerName = broker["券商"].replace(/\n/g, ' ').trim();
        //         tableHeader.textContent = `${broker["代号"]} - ${brokerName}`;
        //         tableContainer.appendChild(tableHeader);

        //         // 创建表格
        //         const table = document.createElement('table');
        //         table.className = 'vertical-table';

        //         // 渲染表格内容（竖向标题栏）
        //         visibleFields.forEach(field => {
        //             const row = document.createElement('tr');

        //             // 创建标题单元格（左侧竖向）
        //             const th = document.createElement('th');
        //             th.textContent = field;
        //             row.appendChild(th);

        //             // 创建数据单元格（右侧）
        //             const td = document.createElement('td');
        //             // 将换行符转换为<br>标签
        //             td.innerHTML = broker[field].replace(/\n/g, '<br>');

        //             // 特色字段特殊处理
        //             if (field === '特色' && broker[field]) {
        //                 td.classList.add('feature-highlight');
        //             }

        //             row.appendChild(td);
        //             table.appendChild(row);
        //         });

        //         tableContainer.appendChild(table);
        //         container.appendChild(tableContainer);
        //     });
        // }

        // 12. 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function () {
            initFieldFilters();
            initDataRowFilters();
            //initSingleTableFieldOrderFilters();
            renderTable();
            // renderSingleTables();
        });
    </script>
</body>

</html>